service: teligent

provider:
  name: aws
  stage: "local"
  region: "us-east-1"
  stackName: ${self:service}-${self:provider.stage}

  # default tags for all resources
  stackTags:
    Owner: ${self:service}
    Environment: ${self:provider.stage}
  tags: ${self:provider.stackTags}

  # config lambda functions
  runtime: python3.12

  # Default environment for lambda functions
  environment:
    REGION: ${self:provider.region}
    STAGE: ${self:provider.stage}
    POWERTOOLS_LOG_LEVEL: DEBUG

plugins:
  - serverless-python-requirements
  - serverless-offline
  - serverless-localstack

useDotenv: true

custom:
  # load the configuration corresponding to a specific $stage
  configs: ${file(ops/infra/configs/${self:provider.stage}.yml)}
    # plugins
  localstack:
    stages: [local]
    debug: false
    lambda:
      mountCode: true
    autostart: true
  pythonRequirements: ${file(ops/infra/plugins/python_requirements.yml):pythonRequirements}

package:
  individually: true
  excludeDevDependencies: true
  patterns:
    - "!./**"

functions: ${file(serverless.yml):functions}

resources: ${file(serverless.yml):resources}
